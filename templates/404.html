{% extends "base.html" %}

{% block title %}Page Not Found - SecretGuardian{% endblock %}

{% block content %}
<div style="min-height: calc(100vh - 160px); display: flex; align-items: center; justify-content: center; background: radial-gradient(ellipse at center, rgba(163, 133, 96, 0.1) 0%, var(--color-background) 70%);">
    <div class="container" style="text-align: center; max-width: 600px;">
        <div style="margin-bottom: 3rem;">
            <i class="fas fa-shield-alt" style="font-size: 6rem; color: var(--color-primary); opacity: 0.8; margin-bottom: 2rem;"></i>
            
            <h1 style="font-size: 4rem; font-weight: 700; color: var(--color-primary); margin-bottom: 1rem;">
                404
            </h1>
            
            <h2 style="font-size: 1.5rem; color: var(--color-text); margin-bottom: 1rem;">
                Page Not Found
            </h2>
            
            <p style="color: var(--color-text-secondary); font-size: 1.125rem; line-height: 1.6; margin-bottom: 2rem;">
                {{ message or "The page you're looking for doesn't exist or has been moved. Our security scanners couldn't locate this resource." }}
            </p>
        </div>

        <!-- Quick Actions -->
        <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 3rem;">
            {% if user %}
            <a href="/dashboard" class="btn btn-primary">
                <i class="fas fa-home"></i>
                Go to Dashboard
            </a>
            <a href="/repositories" class="btn btn-secondary">
                <i class="fas fa-code-branch"></i>
                Repositories
            </a>
            <a href="/scan" class="btn btn-secondary">
                <i class="fas fa-search"></i>
                Manual Scan
            </a>
            {% else %}
            <a href="/" class="btn btn-primary">
                <i class="fas fa-home"></i>
                Go Home
            </a>
            <a href="/login" class="btn btn-secondary">
                <i class="fas fa-sign-in-alt"></i>
                Login
            </a>
            {% endif %}
            <button onclick="history.back()" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i>
                Go Back
            </button>
        </div>

        <!-- Search Suggestion -->
        <div style="background: rgba(163, 133, 96, 0.05); border-radius: 1rem; padding: 2rem; margin-bottom: 2rem;">
            <h3 style="margin-bottom: 1rem; color: var(--color-text); display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
                <i class="fas fa-search"></i>
                Looking for something specific?
            </h3>
            <div style="display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                {% if user %}
                <a href="/reports" style="color: var(--color-text-secondary); text-decoration: none; padding: 1rem; border: 1px solid var(--color-border); border-radius: var(--radius-md); transition: all 0.3s ease;" 
                   onmouseover="this.style.borderColor='var(--color-primary)'; this.style.background='rgba(163, 133, 96, 0.1)'"
                   onmouseout="this.style.borderColor='var(--color-border)'; this.style.background=''">
                    <i class="fas fa-file-alt" style="display: block; font-size: 1.5rem; color: var(--color-primary); margin-bottom: 0.5rem;"></i>
                    <strong>Security Reports</strong>
                    <div style="font-size: 0.875rem; opacity: 0.8;">View scan results</div>
                </a>
                
                <a href="/repositories" style="color: var(--color-text-secondary); text-decoration: none; padding: 1rem; border: 1px solid var(--color-border); border-radius: var(--radius-md); transition: all 0.3s ease;"
                   onmouseover="this.style.borderColor='var(--color-primary)'; this.style.background='rgba(163, 133, 96, 0.1)'"
                   onmouseout="this.style.borderColor='var(--color-border)'; this.style.background=''">
                    <i class="fas fa-code-branch" style="display: block; font-size: 1.5rem; color: var(--color-primary); margin-bottom: 0.5rem;"></i>
                    <strong>Repositories</strong>
                    <div style="font-size: 0.875rem; opacity: 0.8;">Manage monitoring</div>
                </a>
                
                <a href="/scan" style="color: var(--color-text-secondary); text-decoration: none; padding: 1rem; border: 1px solid var(--color-border); border-radius: var(--radius-md); transition: all 0.3s ease;"
                   onmouseover="this.style.borderColor='var(--color-primary)'; this.style.background='rgba(163, 133, 96, 0.1)'"
                   onmouseout="this.style.borderColor='var(--color-border)'; this.style.background=''">
                    <i class="fas fa-search" style="display: block; font-size: 1.5rem; color: var(--color-primary); margin-bottom: 0.5rem;"></i>
                    <strong>Manual Scan</strong>
                    <div style="font-size: 0.875rem; opacity: 0.8;">Scan code directly</div>
                </a>
                {% else %}
                <a href="/login" style="color: var(--color-text-secondary); text-decoration: none; padding: 1rem; border: 1px solid var(--color-border); border-radius: var(--radius-md); transition: all 0.3s ease;"
                   onmouseover="this.style.borderColor='var(--color-primary)'; this.style.background='rgba(163, 133, 96, 0.1)'"
                   onmouseout="this.style.borderColor='var(--color-border)'; this.style.background=''">
                    <i class="fas fa-sign-in-alt" style="display: block; font-size: 1.5rem; color: var(--color-primary); margin-bottom: 0.5rem;"></i>
                    <strong>Login</strong>
                    <div style="font-size: 0.875rem; opacity: 0.8;">Access your account</div>
                </a>
                
                <div style="color: var(--color-text-secondary); text-decoration: none; padding: 1rem; border: 1px solid var(--color-border); border-radius: var(--radius-md); opacity: 0.7;">
                    <i class="fas fa-info-circle" style="display: block; font-size: 1.5rem; color: var(--color-primary); margin-bottom: 0.5rem;"></i>
                    <strong>About SecretGuardian</strong>
                    <div style="font-size: 0.875rem; opacity: 0.8;">AI-powered security</div>
                </div>
                
                <div style="color: var(--color-text-secondary); text-decoration: none; padding: 1rem; border: 1px solid var(--color-border); border-radius: var(--radius-md); opacity: 0.7;">
                    <i class="fas fa-question-circle" style="display: block; font-size: 1.5rem; color: var(--color-primary); margin-bottom: 0.5rem;"></i>
                    <strong>Help & Support</strong>
                    <div style="font-size: 0.875rem; opacity: 0.8;">Get assistance</div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Security Notice -->
        <div style="padding: 1.5rem; background: rgba(45, 90, 61, 0.1); border-radius: 1rem; border: 1px solid rgba(45, 90, 61, 0.2);">
            <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                <i class="fas fa-shield-check" style="color: var(--color-success);"></i>
                <strong style="color: var(--color-success);">Secure Connection</strong>
            </div>
            <p style="margin: 0; font-size: 0.875rem; color: var(--color-text-secondary);">
                Even when lost, your data remains protected. SecretGuardian maintains enterprise-grade security across all interactions.
            </p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Add fun 404 animations
    document.addEventListener('DOMContentLoaded', function() {
        // Animate the 404 number
        const title = document.querySelector('h1');
        title.style.animation = 'bounce 2s infinite';
        
        // Show helpful message after delay
        setTimeout(() => {
            if (window.SecretGuardian) {
                window.SecretGuardian.showNotification('üîç Page not found, but your security is still our priority!', 'info');
            }
        }, 2000);

        // Track 404 for analytics (if enabled)
        if (window.gtag) {
            gtag('event', 'page_not_found', {
                'page_location': window.location.href,
                'page_title': document.title
            });
        }
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        // Home with H key
        if (e.key === 'h' || e.key === 'H') {
            {% if user %}
            window.location.href = '/dashboard';
            {% else %}
            window.location.href = '/';
            {% endif %}
        }
        
        // Back with B key or Escape
        if (e.key === 'b' || e.key === 'B' || e.key === 'Escape') {
            history.back();
        }
        
        // Login with L key (if not logged in)
        {% if not user %}
        if (e.key === 'l' || e.key === 'L') {
            window.location.href = '/login';
        }
        {% endif %}
        
        // Search with S key (if logged in)
        {% if user %}
        if (e.key === 's' || e.key === 'S') {
            window.location.href = '/scan';
        }
        {% endif %}
    });

    // Easter egg - Konami code for fun
    let konamiCode = [];
    const konamiPattern = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65]; // Up Up Down Down Left Right Left Right B A
    
    document.addEventListener('keydown', function(e) {
        konamiCode.push(e.keyCode);
        if (konamiCode.length > konamiPattern.length) {
            konamiCode.shift();
        }
        
        if (konamiCode.length === konamiPattern.length && 
            konamiCode.every((code, index) => code === konamiPattern[index])) {
            // Easter egg activated
            const shield = document.querySelector('.fas.fa-shield-alt');
            shield.style.animation = 'spin 2s linear infinite, pulse 1s infinite';
            shield.style.color = 'var(--color-accent)';
            
            if (window.SecretGuardian) {
                window.SecretGuardian.showNotification('üéÆ Konami Code activated! You\'ve unlocked maximum security mode!', 'success');
            }
            
            // Reset after 5 seconds
            setTimeout(() => {
                shield.style.animation = '';
                shield.style.color = 'var(--color-primary)';
            }, 5000);
        }
    });

    // Add hover effect to the main icon
    const mainIcon = document.querySelector('.fas.fa-shield-alt');
    mainIcon.addEventListener('mouseenter', function() {
        this.style.transform = 'scale(1.1) rotate(10deg)';
        this.style.transition = 'all 0.3s ease';
    });
    
    mainIcon.addEventListener('mouseleave', function() {
        this.style.transform = 'scale(1) rotate(0deg)';
    });
</script>

<style>
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
            transform: translateY(0);
        }
        40% {
            transform: translateY(-20px);
        }
        60% {
            transform: translateY(-10px);
        }
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        h1 {
            font-size: 3rem !important;
        }
        
        .container {
            padding: 1rem;
        }
        
        .fas.fa-shield-alt {
            font-size: 4rem !important;
        }
    }
</style>
{% endblock %}